<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ninja Shoutout</title>

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Ninja Shoutout">
  <link rel="apple-touch-icon" href="icon-180.png">

  <style>
    :root{
      --bg1:#0ea5e9;
      --bg2:#2563eb;
      --card:#ffffff;
      --ink:#0f172a;
      --muted:#64748b;
      --brand:#2563eb;
      --brand-soft:#dbeafe;
      --border:#e5e7eb;
      --radius:18px;
      --shadow:0 14px 40px rgba(15,23,42,.18),0 3px 10px rgba(15,23,42,.10);
      --ok:#22c55e;
      --error:#ef4444;
    }

    *{box-sizing:border-box;margin:0;padding:0}

    html,body{
      min-height:100vh;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif;
      color:var(--ink);
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      background-attachment:fixed;
    }

    body{
      display:flex;
      justify-content:center;
      align-items:center;
      padding:16px;
    }

    .wrap{
      width:100%;
      max-width:920px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    header{
      text-align:center;
      color:#e5edff;
    }
    header .brand{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    header img.logo{
      height:40px;
      width:auto;
      filter:drop-shadow(0 1px 2px rgba(15,23,42,.35));
    }
    header h1{
      margin:10px 0 4px;
      font-size:clamp(22px,4vw,32px);
      font-weight:800;
    }
    header p{
      margin:0;
      font-size:14px;
      color:#bfdbfe;
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:18px;
      border:1px solid var(--border);
      box-shadow:var(--shadow);
      backdrop-filter:saturate(1.2) blur(4px);
    }

    .stepper{
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#f8fafc;
      color:#0f172a;
      font-size:12px;
      font-weight:700;
    }
    .pill .dot{
      width:8px;height:8px;border-radius:999px;background:#cbd5e1;
    }
    .pill.active{
      background:var(--brand-soft);
      border-color:rgba(37,99,235,.35);
    }
    .pill.active .dot{ background: var(--brand); }

    .step-header{
      display:flex;
      align-items:flex-start;
      gap:10px;
      margin-bottom:10px;
    }
    .step-number{
      width:28px;
      height:28px;
      border-radius:999px;
      background:var(--brand-soft);
      color:var(--brand);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      font-size:13px;
      flex-shrink:0;
    }
    .step-header h2{
      margin:0;
      font-size:18px;
      font-weight:800;
      color:#0f172a;
    }
    .step-description{
      margin:2px 0 0;
      font-size:13px;
      color:var(--muted);
    }

    .question-container{ margin:8px 0 12px; }

    label.field-label{
      display:block;
      font-size:13px;
      font-weight:700;
      color:#0f172a;
      margin-bottom:6px;
    }

    input[type="text"],
    input[type="file"],
    textarea,
    select{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      font-size:15px;
      font-family:inherit;
      transition:all .18s ease;
      background:#f8fafc;
      color:var(--ink);
    }
    input[type="text"]:focus,
    textarea:focus,
    select:focus{
      outline:none;
      border-color:var(--brand);
      box-shadow:0 0 0 2px rgba(37,99,235,.14);
      background:#ffffff;
    }
    input[type="file"]{ padding:10px 10px; background:#f9fafb; }

    textarea{
      min-height:170px;
      resize:vertical;
      line-height:1.5;
      font-size:15px;
    }

    .options-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:10px;
      margin-top:6px;
    }

    .shoutout-option{
      display:block;
      border-radius:14px;
      padding:12px;
      border:1px solid var(--border);
      cursor:pointer;
      transition:all .18s ease;
      background:#ffffff;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .shoutout-option:hover{
      border-color:var(--brand);
      box-shadow:0 6px 18px rgba(15,23,42,.08);
      transform:translateY(-1px);
    }
    .shoutout-option input{ display:none; }
    .shoutout-option.selected{
      border-color:var(--brand);
      background:var(--brand-soft);
    }

    .option-content{
      display:flex;
      align-items:flex-start;
      gap:10px;
      font-size:14px;
      color:#0f172a;
    }
    .option-icon{ font-size:20px; line-height:1; margin-top:1px; }
    .option-text{ font-weight:800; }
    .option-sub{ font-size:12px; color:#6b7280; margin-top:3px; font-weight:500; }

    .inline-note{
      font-size:12px;
      color:#6b7280;
      padding:8px 10px;
      border-radius:10px;
      background:#eff6ff;
      margin-top:8px;
    }

    .btn{
      appearance:none;
      border-radius:14px;
      padding:12px 14px;
      border:1px solid var(--border);
      background:#f8fafc;
      font-size:14px;
      font-weight:900;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      min-height:46px;
      white-space:nowrap;
      transition:all .18s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn.primary{
      background:var(--brand);
      border-color:var(--brand);
      color:#ffffff;
      box-shadow:0 6px 18px rgba(37,99,235,.30);
    }
    .btn.ghost{ background:#ffffff; color:#0f172a; }
    .btn:hover:not(:disabled){
      transform:translateY(-1px);
      box-shadow:0 8px 22px rgba(15,23,42,.14);
    }
    .btn.primary:hover:not(:disabled){
      background:#1d4ed8;
      border-color:#1d4ed8;
    }
    .btn:disabled{
      opacity:.55;
      cursor:not-allowed;
      box-shadow:none;
      transform:none;
    }

    .actions-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:space-between;
      margin-top:14px;
    }
    .actions-row .right{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      margin-left:auto;
    }

    .banner{
      display:none;
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      font-size:13px;
      font-weight:700;
    }
    .banner.ok{
      background:rgba(22,163,74,.08);
      color:#15803d;
      border:1px solid rgba(22,163,74,.35);
    }
    .banner.error{
      background:rgba(239,68,68,.06);
      color:#b91c1c;
      border:1px solid rgba(239,68,68,.35);
    }

    .canvas-wrap{
      margin-top:12px;
      border-radius:14px;
      border:1px dashed var(--border);
      padding:10px;
      background:#f8fafc;
    }
    .canvas-inner{
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:flex-start;
    }
    .canvas-row{ width:100%; }

    canvas{
      width:100%;
      max-width:100%;
      border-radius:14px;
      border:1px solid var(--border);
      background:#020617;
      display:block;
      touch-action:none;
      cursor:grab;
    }
    canvas:active{ cursor:grabbing; }

    .photo-controls{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:10px;
      margin-top:8px;
    }
    .slider-field{
      font-size:12px;
      color:#374151;
    }
    .slider-field label{
      display:flex;
      justify-content:space-between;
      margin-bottom:4px;
      font-weight:800;
    }
    .slider-field input[type="range"]{ width:100%; }

    .step{
      display:none;
      animation:fade .22s ease;
    }
    .step.active{ display:block; }
    @keyframes fade{
      from{opacity:0;transform:translateY(4px);}
      to{opacity:1;transform:translateY(0);}
    }

    @media (max-width:720px){
      .actions-row{ flex-direction:column; align-items:stretch; }
      .actions-row .right{ width:100%; justify-content:stretch; }
      .actions-row .btn{ width:100%; }
    }

    .subject-preview{
      margin-top:8px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:#ffffff;
    }
    .subject-preview .label{
      font-size:12px;
      color:#64748b;
      font-weight:800;
      margin-bottom:4px;
    }
    .subject-preview .value{
      font-size:14px;
      font-weight:900;
      color:#0f172a;
      word-break:break-word;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <img class="logo" src="https://www.codeninjas.com/hubfs/Group%201.svg" alt="Code Ninjas logo" onerror="this.style.display='none'">
      </div>
      <h1>Ninja Shout-Out Builder</h1>
    </header>

    <section class="card" aria-live="polite">
      <div class="stepper" id="stepper">
        <div class="pill active" data-step="1"><span class="dot"></span> Center</div>
        <div class="pill" data-step="2"><span class="dot"></span> Ninja</div>
        <div class="pill" data-step="3"><span class="dot"></span> Shout-out</div>
        <div class="pill" data-step="4"><span class="dot"></span> Message</div>
        <div class="pill" data-step="5"><span class="dot"></span> Images</div>
      </div>

      <div class="step active" id="step1">
        <div class="step-header">
          <div class="step-number">1</div>
          <div>
            <h2>Choose your center</h2>
          </div>
        </div>

        <div class="question-container">
          <label for="centerSelect" class="field-label">Center</label>
          <select id="centerSelect">
            <option value="cooper">Cooper City</option>
            <option value="aventura">Aventura</option>
            <option value="weston">Weston</option>
          </select>
          <div class="inline-note" id="centerEmailNote">
            Center email: <strong id="centerEmailDisplay">coopercityfl@codeninjas.com</strong>
          </div>
        </div>

        <div class="actions-row">
          <div></div>
          <div class="right">
            <button class="btn primary" type="button" id="next1" disabled>Next ‚ñ∂</button>
          </div>
        </div>
      </div>

      <div class="step" id="step2">
        <div class="step-header">
          <div class="step-number">2</div>
          <div>
            <h2>Ninja details</h2>
          </div>
        </div>

        <div class="question-container">
          <label for="ninjaName" class="field-label">Ninja‚Äôs name</label>
          <input id="ninjaName" type="text" placeholder="e.g., Alex, Sophia" autocomplete="off" />
        </div>

        <div class="question-container">
          <label for="parentName" class="field-label">Parent name</label>
          <input id="parentName" type="text" placeholder="e.g., Emma‚Äôs mom" autocomplete="off" />
        </div>

        <div class="question-container">
          <label for="pronounSelect" class="field-label">Ninja pronouns</label>
          <select id="pronounSelect">
            <option value="they">They / their</option>
            <option value="he">He / his</option>
            <option value="she">She / her</option>
          </select>
        </div>

        <div class="question-container">
          <label for="senderName" class="field-label">Sender name</label>
          <input id="senderName" type="text" placeholder="e.g., Marina" value="Marina" autocomplete="off" />
        </div>

        <div class="actions-row">
          <button class="btn ghost" type="button" id="back2">‚óÄ Back</button>
          <div class="right">
            <button class="btn primary" type="button" id="next2" disabled>Next ‚ñ∂</button>
          </div>
        </div>
      </div>

      <div class="step" id="step3">
        <div class="step-header">
          <div class="step-number">3</div>
          <div>
            <h2>What are we shouting them out for?</h2>
          </div>
        </div>

        <div class="question-container">
          <div class="options-grid" id="shoutoutGrid">
            
            <label class="shoutout-option">
              <input type="radio" name="reason" value="newninja">
              <div class="option-content">
                <div class="option-icon">ü•∞</div>
                <div>
                  <div class="option-text">New Ninja Welcome</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="belt">
              <div class="option-content">
                <div class="option-icon">üéâ</div>
                <div>
                  <div class="option-text">Belt-up celebration</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="project">
              <div class="option-content">
                <div class="option-icon">üíª</div>
                <div>
                  <div class="option-text">Cool project</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="outstanding">
              <div class="option-content">
                <div class="option-icon">‚≠ê</div>
                <div>
                  <div class="option-text">Outstanding student</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="behavior">
              <div class="option-content">
                <div class="option-icon">üòä</div>
                <div>
                  <div class="option-text">Well-behaved</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="helper">
              <div class="option-content">
                <div class="option-icon">ü§ù</div>
                <div>
                  <div class="option-text">Helped another student</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="birthday">
              <div class="option-content">
                <div class="option-icon">üéÇ</div>
                <div>
                  <div class="option-text">Birthday shout-out</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="tour">
              <div class="option-content">
                <div class="option-icon">üèØ</div>
                <div>
                  <div class="option-text">Tour follow-up</div>
                </div>
              </div>
            </label>

            <label class="shoutout-option">
              <input type="radio" name="reason" value="custom">
              <div class="option-content">
                <div class="option-icon">‚ú®</div>
                <div>
                  <div class="option-text">Custom shout-out</div>
                </div>
              </div>
            </label>
          </div>
        </div>

        <div class="question-container">
          <label for="customReason" class="field-label">If custom, what are we celebrating?</label>
          <input id="customReason" type="text" placeholder='e.g., "amazing focus today"' autocomplete="off" />
        </div>

        <div class="question-container" id="senseiRow" style="display:none;">
          <label for="senseiName" class="field-label">Sensei name (for tours)</label>
          <input id="senseiName" type="text" placeholder='e.g., "Sensei Alexis"' autocomplete="off" />
        </div>

        <div class="actions-row">
          <button class="btn ghost" type="button" id="back3">‚óÄ Back</button>
          <div class="right">
            <button class="btn primary" type="button" id="next3" disabled>Next ‚ñ∂</button>
          </div>
        </div>
      </div>

      <div class="step" id="step4">
        <div class="step-header">
          <div class="step-number">4</div>
          <div>
            <h2>Generate message</h2>
            <p class="step-description">Preview and copy your message.</p>
          </div>
        </div>

        <div class="question-container">
          <label for="subjectStyle" class="field-label">Email subject style</label>
          <select id="subjectStyle">
            <option value="simple">Simple</option>
            <option value="warm">Warm</option>
            <option value="hype">Hype</option>
          </select>
          <div class="subject-preview">
            <div class="label">Subject preview</div>
            <div class="value" id="subjectPreview">Ninja Shoutout...</div>
          </div>
        </div>

        <div class="question-container">
          <label for="messageOutput" class="field-label">Message</label>
          <textarea id="messageOutput" readonly></textarea>
        </div>

        <div class="actions-row">
          <button class="btn ghost" type="button" id="back4">‚óÄ Back</button>
          <div class="right">
            <button class="btn ghost" type="button" id="generateBtn">‚ú® Generate</button>
            <button class="btn primary" type="button" id="copyBtn">üìã Copy</button>
            <button class="btn" type="button" id="next4" disabled>Next ‚ñ∂</button>
          </div>
        </div>
      </div>

      <div class="step" id="step5">
        <div class="step-header">
          <div class="step-number">5</div>
          <div>
            <h2>Shout-out pictures</h2>
          </div>
        </div>

        <div class="question-container">
          <label for="photoInput" class="field-label">Ninja photo</label>
          <input id="photoInput" type="file" accept="image/*" />
        </div>

        <div class="photo-controls">
          <div class="slider-field">
            <label for="zoomSlider"><span>Zoom</span><span id="zoomLabel">1.00√ó</span></label>
            <input id="zoomSlider" type="range" min="0.6" max="2.0" step="0.02" value="1.0" />
          </div>
          <div class="slider-field">
            <label for="panXSlider"><span>Horizontal</span><span id="panXLabel">0</span></label>
            <input id="panXSlider" type="range" min="-100" max="100" step="1" value="0" />
          </div>
          <div class="slider-field">
            <label for="panYSlider"><span>Vertical</span><span id="panYLabel">0</span></label>
            <input id="panYSlider" type="range" min="-100" max="100" step="1" value="0" />
          </div>
        </div>

        <div class="canvas-wrap">
          <div class="canvas-inner">
            <div class="canvas-row">
              <canvas id="shoutoutCanvasWide" width="1650" height="1275"></canvas>
            </div>
            <div class="canvas-row">
              <canvas id="shoutoutCanvasStory" width="768" height="1365"></canvas>
            </div>

            <div class="actions-row">
              <button class="btn ghost" type="button" id="back5">‚óÄ Back</button>
              <div class="right">
                <button class="btn ghost" type="button" id="renderImageBtn">üñº Generate images</button>
                <button class="btn primary" type="button" id="emailBtn">‚úâÔ∏è Email to center</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="okBanner" class="banner ok"></div>
      <div id="errBanner" class="banner error"></div>
    </section>
  </div>

  <script>
    function getPronouns(code){
      let p = {subj:"they", obj:"them", possAdj:"their", possPron:"theirs", refl:"themselves"};
      if(code === "he") p = {subj:"he", obj:"him", possAdj:"his", possPron:"his", refl:"himself"};
      if(code === "she") p = {subj:"she", obj:"her", possAdj:"her", possPron:"hers", refl:"herself"};
      const cap = s => s.charAt(0).toUpperCase() + s.slice(1);
      return { ...p, subjCap: cap(p.subj), objCap: cap(p.obj), possAdjCap: cap(p.possAdj) };
    }

    const centerMap = {
      cooper:  { label: "Cooper City", email: "coopercityfl@codeninjas.com", centerName: "Code Ninjas Cooper City" },
      aventura:{ label: "Aventura",    email: "aventurafl@codeninjas.com",    centerName: "Code Ninjas Aventura" },
      weston:  { label: "Weston",      email: "westonfl@codeninjas.com",      centerName: "Code Ninjas Weston" }
    };

    function getCenter(){
      return centerMap[document.getElementById("centerSelect").value] || centerMap.cooper;
    }

    function buildInvitation(ninjaName) {
      const name = (ninjaName || "your Ninja").trim();
      return `\n\nI‚Äôd also love to personally invite you to connect with me! If you‚Äôd ever like to discuss ${name}‚Äôs progress, hear more about the specific skills they are learning, or if you have any suggestions for our program, please just reply to this message. I‚Äôd love to meet you 1-on-1 to ensure we‚Äôre providing the best possible experience for your Ninja.`;
    }

    const coreTemplates = {
      newninja: [
        (n,p) => `It was such a milestone day‚Äî${n} officially started their journey as a Ninja today! We are so excited to have your family as part of our dojo and can‚Äôt wait to see the amazing projects ${n} will create.`,
        (n,p) => `${n} had a fantastic first day in the dojo! They jumped right into the curriculum with great energy, and we are thrilled to have them officially join our Code Ninjas family.`,
        (n,p) => `Welcome to the dojo! ${n} did an incredible job during their first official session today. It‚Äôs the start of something great, and we‚Äôre honored to be part of their coding journey.`
      ],
      belt: [(n,p) => `${n} leveled up ${p.possAdj} belt today! üôå`, (n,p) => `${n} earned a new belt today!`],
      project: [(n,p) => `${n} built a really awesome coding project today! üíª`],
      outstanding: [(n,p) => `${n} stood out as an outstanding Ninja today! ‚≠ê`],
      behavior: [(n,p) => `${n} showed excellent behavior today‚Äîrespectful and focused.`],
      helper: [(n,p) => `${n} helped another student today‚Äîgreat leadership! ü§ù`],
      birthday: [(n,p) => `${n} had a fun birthday at the dojo today! üéâ`]
    };

    function buildFullMessage(name, reason, custom, sender, sensei, parent, pronoun, center){
      const parentLine = parent ? `Hi ${parent.trim()},` : "Hi there,";
      let core = "";
      if(reason === "custom") core = `${name} earned a shout-out for ${custom || "doing great"}.`;
      else if(reason === "tour") core = `${name} had a fun tour today!`;
      else core = coreTemplates[reason][Math.floor(Math.random()*coreTemplates[reason].length)](name, pronoun);

      let msg = `${parentLine}\nThis is ${sender} from ${center}.\n\n`;
      msg += (reason === "newninja") ? core : `I just wanted to share how great ${name} was today. ${core}`;
      msg += `\n\nI grabbed a quick photo of ${name} and thought you might like it. üòä`;
      msg += buildInvitation(name);
      msg += `\n\nThanks for being part of our dojo family! üíô`;
      return msg;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const nameInput = document.getElementById("ninjaName");
      const senderInput = document.getElementById("senderName");
      const reasonInputs = document.querySelectorAll('input[name="reason"]');
      const genBtn = document.getElementById("generateBtn");
      const output = document.getElementById("messageOutput");

      function showStep(s) {
        document.querySelectorAll(".step").forEach((el, i) => el.classList.toggle("active", i+1 === s));
        document.querySelectorAll(".pill").forEach((p, i) => p.classList.toggle("active", i+1 === s));
      }

      document.getElementById("next1").onclick = () => showStep(2);
      document.getElementById("next2").onclick = () => showStep(3);
      document.getElementById("next3").onclick = () => showStep(4);
      document.getElementById("next4").onclick = () => showStep(5);
      
      document.getElementById("back2").onclick = () => showStep(1);
      document.getElementById("back3").onclick = () => showStep(2);
      document.getElementById("back4").onclick = () => showStep(3);
      document.getElementById("back5").onclick = () => showStep(4);

      const validate = () => {
        document.getElementById("next1").disabled = !document.getElementById("centerSelect").value;
        document.getElementById("next2").disabled = !nameInput.value || !senderInput.value;
        document.getElementById("next3").disabled = !Array.from(reasonInputs).some(r => r.checked);
      };
      [nameInput, senderInput, ...reasonInputs].forEach(el => el.oninput = validate);
      document.querySelectorAll(".shoutout-option").forEach(opt => opt.onclick = () => {
        opt.querySelector("input").checked = true;
        document.querySelectorAll(".shoutout-option").forEach(o => o.classList.toggle("selected", o.querySelector("input").checked));
        validate();
      });

      genBtn.onclick = () => {
        const reason = Array.from(reasonInputs).find(r => r.checked).value;
        const msg = buildFullMessage(nameInput.value, reason, document.getElementById("customReason").value, senderInput.value, "", document.getElementById("parentName").value, getPronouns(document.getElementById("pronounSelect").value), getCenter().centerName);
        output.value = msg;
        document.getElementById("next4").disabled = false;
        document.getElementById("okBanner").style.display = "block";
        document.getElementById("okBanner").innerText = "Message Generated!";
      };

      document.getElementById("copyBtn").onclick = () => {
        navigator.clipboard.writeText(output.value);
        alert("Copied!");
      };

      validate();
    });
  </script>
</body>
</html>
